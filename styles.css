/*
  farmacias-responsive.css
  Versión mejorada: Mobile-first, interactiva y accesible
  Basada en el CSS original del sistema "FARMACIAS ZONA 1561".

  Instrucciones: reemplaza o importa este archivo después de tu CSS actual.
  Contiene utilidades para:
    • Mejorar interacción táctil (FAB, bottom nav)
    • Transformar tabla en "cards" en móviles usando data-label
    • Animaciones respetuosas con accesibilidad
    • Skeletons (loading) y estados
    • Detalles/summary para filas expandibles
*/

:root{
  /* Paleta y espaciado heredados del original (menos repetición) */
  --primary-blue: #1e3a8a;
  --secondary-blue: #3b82f6;
  --accent-blue: #60a5fa;
  --success-green: #059669;
  --warning-amber: #d97706;
  --danger-red: #dc2626;

  --gray-50: #f8fafc;
  --gray-100: #f1f5f9;
  --gray-200: #e2e8f0;
  --gray-300: #cbd5e1;
  --gray-400: #94a3b8;
  --gray-500: #64748b;
  --gray-600: #475569;
  --gray-700: #334155;
  --gray-800: #1e293b;
  --gray-900: #0f172a;

  --font-primary: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, sans-serif;
  --font-mono: 'JetBrains Mono', monospace;

  --spacing-xxs: 0.125rem;
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.5rem;
  --spacing-md: 1rem;
  --spacing-lg: 1.5rem;
  --spacing-xl: 2rem;
  --spacing-2xl: 3rem;

  --radius-sm: 0.375rem;
  --radius-md: 0.5rem;
  --radius-lg: 0.75rem;
  --radius-xl: 1rem;

  --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
  --shadow-md: 0 6px 18px rgba(15,23,42,0.08);
  --shadow-lg: 0 18px 40px rgba(15,23,42,0.08);

  --transition-fast: 150ms cubic-bezier(.4,0,.2,1);
  --transition: 300ms cubic-bezier(.4,0,.2,1);

  /* Breakpoints (mobile-first) */
  --bp-sm: 640px;
  --bp-md: 1024px;
  --bp-lg: 1280px;

  /* z-index scale */
  --z-dropdown: 800;
  --z-modal: 1000;
  --z-fab: 1100;
}

/* ---------- Base & reset (lighter) ---------- */
*{box-sizing:border-box;margin:0;padding:0}
html{font-family:var(--font-primary);font-size:16px;scroll-behavior:smooth}
body{font-size:0.9375rem;color:var(--gray-700);background:linear-gradient(135deg,var(--gray-50),var(--gray-100));min-height:100vh;-webkit-font-smoothing:antialiased}

a{color:inherit}
img{max-width:100%;height:auto;display:block}

/* Tap target improvements — aumenta área táctil en móviles */
.btn, .btn-phone, .btn-whatsapp{min-height:44px;min-width:44px}

/* Container responsive (más compacto en móviles) */
.container{width:100%;max-width:1400px;margin:0 auto;padding:var(--spacing-md)}
@media(min-width:var(--bp-sm)){.container{padding:var(--spacing-lg)}}
@media(min-width:var(--bp-md)){.container{padding:var(--spacing-xl)}}

/* ---------- Header: grid para mejor responsividad ---------- */
.header{background:linear-gradient(135deg,var(--primary-blue),var(--secondary-blue));color:#fff;padding:var(--spacing-lg);border-radius:var(--radius-xl);box-shadow:var(--shadow-lg);position:relative;overflow:hidden}
.header-inner{display:grid;grid-template-columns:1fr auto;gap:var(--spacing-md);align-items:center}
.header h1{font-size:1.25rem;font-weight:800;margin:0}
.header p{opacity:0.95;font-weight:300;margin-top:0.25rem}
@media(min-width:var(--bp-sm)){.header h1{font-size:1.75rem}}

/* ---------- Connection status: compact chip for mobile ---------- */
.status-card{display:flex;gap:var(--spacing-sm);align-items:center;padding:0.75rem;border-radius:calc(var(--radius-md));background:white;border:1px solid var(--gray-200);box-shadow:var(--shadow-sm)}
.status-card i{font-size:1.125rem}
.status-card .meta{display:flex;flex-direction:column}

/* ---------- Stats: carousel on mobile, grid on larger ---------- */
.stats-container{display:flex;gap:var(--spacing-md);overflow:auto;padding-bottom:0.25rem}
.stats-container::-webkit-scrollbar{height:6px}
.stats-container .stat-card{min-width:200px;flex:0 0 auto}
@media(min-width:var(--bp-sm)){.stats-container{display:grid;grid-template-columns:repeat(2,1fr);gap:var(--spacing-lg);overflow:visible}}
@media(min-width:var(--bp-md)){.stats-container{grid-template-columns:repeat(3,1fr)}}

/* ---------- Management panel: spacing and stacked actions on mobile ---------- */
.management-panel{background:white;border-radius:var(--radius-xl);box-shadow:var(--shadow-lg);border:1px solid var(--gray-200);overflow:hidden}
.panel-header{padding:var(--spacing-md);display:flex;flex-direction:column;gap:var(--spacing-sm)}
.panel-header h2{margin:0}
.panel-actions{display:flex;gap:var(--spacing-sm);flex-wrap:wrap}
@media(min-width:var(--bp-sm)){.panel-header{flex-direction:row;justify-content:space-between;align-items:center;padding:var(--spacing-lg)}.panel-actions{flex-wrap:nowrap}}

/* ---------- Search: sticky on mobile, large input */
.search-section{background:var(--gray-50);padding:var(--spacing-md)}
.search-container{position:relative}
.search-container input{width:100%;padding:0.75rem 1rem;border:1px solid var(--gray-300);border-radius:calc(var(--radius-md));font-size:1rem;background:white}
.search-clear{position:absolute;right:8px;top:50%;transform:translateY(-50%);background:none;border:none;font-size:1rem;opacity:.6}

/* ---------- Buttons: focus-visible and larger hit areas ---------- */
.btn{display:inline-flex;align-items:center;justify-content:center;gap:0.5rem;padding:0.5rem 0.75rem;border-radius:var(--radius-md);font-weight:600;cursor:pointer;border:none;transition:transform var(--transition),box-shadow var(--transition)}
.btn:active{transform:translateY(0)}
.btn:focus{outline:3px solid rgba(59,130,246,0.12);outline-offset:2px}
.btn-primary{background:linear-gradient(135deg,var(--primary-blue),var(--secondary-blue));color:#fff;box-shadow:var(--shadow-sm)}
.btn-secondary{background:var(--gray-100);color:var(--gray-700);border:1px solid var(--gray-200)}

/* ---------- FAB & bottom nav (mobile-first) ---------- */
.fab{position:fixed;right:calc(16px + env(safe-area-inset-right,0));bottom:calc(16px + env(safe-area-inset-bottom,0));z-index:var(--z-fab);width:56px;height:56px;border-radius:50%;display:inline-grid;place-items:center;background:linear-gradient(135deg,var(--secondary-blue),var(--accent-blue));color:#fff;box-shadow:0 10px 30px rgba(30,58,138,0.18);border:none}
.fab .badge{position:absolute;top:-6px;right:-6px;background:var(--danger-red);color:#fff;border-radius:999px;padding:2px 6px;font-size:0.65rem}

.mobile-bar{position:fixed;left:0;right:0;bottom:0;padding:6px 10px;background:linear-gradient(180deg,rgba(255,255,255,0.9),#fff);border-top:1px solid var(--gray-200);display:flex;gap:8px;justify-content:space-around;align-items:center;z-index:1000;padding-bottom:calc(6px + env(safe-area-inset-bottom,0))}

/* Hide desktop-only elements on mobile without removing them from DOM */
.hide-mobile{display:none}
@media(min-width:var(--bp-sm)){
  .fab{display:none}
  .mobile-bar{display:none}
  .hide-mobile{display:block}
}

/* ---------- Responsive table → mobile cards using data-label (no JS required) ---------- */
.table-container{overflow:auto;border-radius:var(--radius-lg);background:white;border:1px solid var(--gray-200)}
.farmacia-table{width:100%;border-collapse:collapse;min-width:600px}
.farmacia-table th{background:linear-gradient(135deg,var(--gray-800),var(--gray-700));color:#fff;padding:0.75rem 1rem;font-size:0.75rem;text-transform:uppercase;position:sticky;top:0}
.farmacia-table td{padding:0.75rem 1rem;border-bottom:1px solid var(--gray-100);vertical-align:top}

/* On small screens convert each row into a card — using data-label on each TD */
@media(max-width:639px){
  .farmacia-table{min-width:0;border:0}
  .farmacia-table thead{display:none}
  .farmacia-table tr{display:block;margin-bottom:var(--spacing-md);background:white;border-radius:var(--radius-md);box-shadow:var(--shadow-sm);overflow:hidden;border:1px solid var(--gray-100)}
  .farmacia-table td{display:flex;justify-content:space-between;padding:0.75rem;align-items:center}
  .farmacia-table td::before{content:attr(data-label);font-size:0.75rem;color:var(--gray-500);font-weight:600;margin-right:8px;flex:0 0 45%}
  .farmacia-table td[data-label="Acciones"]{display:flex;gap:8px;justify-content:flex-end}
}

/* If you cannot add data-label attributes server-side, see the HTML snippet in the docs: add `data-label="Nombre"` to each TD */

/* ---------- Expandable rows using <details> (progressive enhancement) ---------- */
details.farmacia-details{border-top:1px dashed var(--gray-100);padding:0}
details.farmacia-details summary{list-style:none;cursor:pointer;padding:0.5rem 0.75rem;display:flex;justify-content:space-between;align-items:center}
details.farmacia-details summary::-webkit-details-marker{display:none}
details.farmacia-details[open] summary .chev{transform:rotate(180deg)}

/* ---------- Skeleton loader (rapid visual for loading states) ---------- */
.skeleton{background:linear-gradient(90deg, #f3f4f6 0%, #eceff1 50%, #f3f4f6 100%);background-size:200% 100%;animation:skeleton-anim 1.2s linear infinite;border-radius:4px}
@keyframes skeleton-anim{0%{background-position:200% 0}100%{background-position:-200% 0}}
.skeleton.text{height:14px;width:100%}
.skeleton.avatar{width:40px;height:40px;border-radius:50%}

/* ---------- Modal improvements for mobile (center & max-height) ---------- */
.modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.5);z-index:var(--z-modal);padding:var(--spacing-md);backdrop-filter:blur(3px)}
.modal.open{display:block}
.modal-content{background:white;border-radius:var(--radius-lg);max-width:680px;margin:0 auto;max-height:calc(100vh - 120px);overflow:auto;padding:var(--spacing-lg)}
@media(max-width:639px){.modal-content{width:100%;max-width:100%;margin:0;max-height:calc(100vh - 48px);border-radius:12px}}

/* ---------- Accessibility: reduced motion & prefers-contrast ---------- */
@media (prefers-reduced-motion: reduce){
  *{animation-duration:0.001ms !important;transition-duration:0.001ms !important}
}

/* Focus visible helper */
:focus{outline:none}
:focus-visible{outline:3px solid rgba(59,130,246,0.18);outline-offset:2px}

/* ---------- Utilities ---------- */
.text-center{text-align:center}
.hidden{display:none !important}
.mt-sm{margin-top:var(--spacing-sm)}
.mb-sm{margin-bottom:var(--spacing-sm)}
.p-sm{padding:var(--spacing-sm)}

/* ---------- Small visual tweaks/criticisms addressed ---------- */
/* 1) Evita min-width fijo en tabla para no forzar scroll en teléfonos.
   2) Reemplaza nth-child(4) hide (frágil) por data-label/Acciones detectado en CSS.
   3) Añade FAB + mobile bar respetando safe-area-inset para iOS notch.
*/

/* End */

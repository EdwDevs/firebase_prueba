<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Firebase - Zona 1561</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1><i class="fas fa-database"></i> Test Firebase Zona 1561</h1>
            <p>Sistema de prueba y diagn√≥stico</p>
        </header>

        <div class="connection-status" id="connectionStatus">
            <div class="status-card">
                <i class="fas fa-spinner fa-spin" id="statusIcon"></i>
                <h3 id="statusTitle">Conectando...</h3>
                <p id="statusMessage">Inicializando Firebase...</p>
            </div>
        </div>

        <div class="test-panel">
            <h2><i class="fas fa-flask"></i> Panel de Pruebas</h2>
            
            <div class="test-section">
                <h3>üìù Escribir Datos</h3>
                <div class="input-group">
                    <input type="text" id="testData" placeholder="Escribe algo para probar...">
                    <button onclick="writeTest()" class="btn btn-primary">
                        <i class="fas fa-upload"></i> Escribir
                    </button>
                </div>
            </div>

            <div class="test-section">
                <h3>üìñ Leer Datos</h3>
                <button onclick="readTest()" class="btn btn-success">
                    <i class="fas fa-download"></i> Leer Datos
                </button>
                <div id="dataDisplay" class="data-display">
                    <p>Los datos aparecer√°n aqu√≠...</p>
                </div>
            </div>
        </div>

        <div class="activity-log">
            <h3><i class="fas fa-list"></i> Log de Diagn√≥stico</h3>
            <div id="logContainer" class="log-container"></div>
            <button onclick="clearLog()" class="btn btn-secondary">Limpiar Log</button>
        </div>
    </div>

    <!-- Firebase - Configuraci√≥n Robusta -->
    <script type="module">
        try {
            console.log('üöÄ Iniciando carga de Firebase...');
            
            // Import Firebase
            const { initializeApp } = await import("https://www.gstatic.com/firebasejs/11.9.1/firebase-app.js");
            const { getFirestore, collection, addDoc, getDocs, deleteDoc, doc, connectFirestoreEmulator } = await import("https://www.gstatic.com/firebasejs/11.9.1/firebase-firestore.js");

            // Tu configuraci√≥n Firebase
            const firebaseConfig = {
                apiKey: "AIzaSyAaVSb70OFIoX48T9GbLmTcdXOSvKv2pRk",
                authDomain: "zona1561-4de30.firebaseapp.com",
                projectId: "zona1561-4de30",
                storageBucket: "zona1561-4de30.firebasestorage.app",
                messagingSenderId: "451366030738",
                appId: "1:451366030738:web:e638db51fbe24f6a48054b"
            };

            console.log('üìä Configuraci√≥n Firebase cargada');

            // Inicializar Firebase
            const app = initializeApp(firebaseConfig);
            const db = getFirestore(app);

            console.log('‚úÖ Firebase inicializado correctamente');

            // Hacer disponible globalmente
            window.firebaseApp = app;
            window.firebaseDB = db;
            window.firebaseCollection = collection;
            window.firebaseAddDoc = addDoc;
            window.firebaseGetDocs = getDocs;
            window.firebaseDeleteDoc = deleteDoc;
            window.firebaseDoc = doc;

            // Se√±alar que Firebase est√° listo
            window.firebaseReady = true;
            window.dispatchEvent(new CustomEvent('firebaseReady'));

            console.log('üî• Firebase zona1561-4de30 listo para usar');

        } catch (error) {
            console.error('‚ùå Error inicializando Firebase:', error);
            window.firebaseError = error;
            window.dispatchEvent(new CustomEvent('firebaseError', { detail: error }));
        }
    </script>

    <script src="script.js"></script>
</body>
</html>
